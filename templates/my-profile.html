    <!DOCTYPE html>
    <html lang="zxx">

    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <title>My Profile</title>
        <link rel="icon" href="{{ asset('img/pane_logo.png') }}" type="image/png">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="{{ asset('css/bootstrap.min.css') }}"/>
        <!-- animate CSS -->
        <link rel="stylesheet" href="{{ asset('css/animate.css') }}"/>
        <!-- font awesome CSS -->
        <link rel="stylesheet" href="{{ asset('vendors/elegant_Icon/elegent_icon.css') }}"/>
        <!-- nice select CSS -->
        <link rel="stylesheet" href="{{ asset('vendors/niceselect/css/nice-select.css') }}"/>
        <!-- owl carousel CSS -->
        <link rel="stylesheet" href="{{ asset('vendors/owl_carousel/css/owl.carousel.css') }}"/>
        <!-- magnific popup CSS -->
        <link rel="stylesheet" href="{{ asset('vendors/magnify_popup/magnific-popup.css') }}"/>
        <!-- Countdown CSS -->
        <link rel="stylesheet" href="{{ asset('vendors/countdown/css/Countdown.css') }}"/>
        <!-- flaticon CSS -->
        <link rel="stylesheet" href="{{ asset('css/flaticon.css') }}"/>
        <!-- aos CSS -->
        <link rel="stylesheet" href="{{ asset('vendors/aos/aos.css') }}"/>
        <!-- course CSS -->
        <link rel="stylesheet" href="{{ asset('css/courses.css') }}"/>
        <!-- style CSS -->
        <link rel="stylesheet" href="{{ asset('css/style.css') }}"/>


    </head>

    <body>
        <!-- start Preloader  -->
        <div class="preloder_part">
            <div class="spinner">
                <div class="dot1"></div>
                <div class="dot2"></div>
            </div>
        </div>
        <!-- End Preloader  -->

        {%include 'header.html' %}

        <!-- breadcrumb part -->
        <section class="breadcrumb_part blog_grid_bg">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-6">
                        <div class="breadcrumb_iner">
                            <h2 id="greeting-message"></h2>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- breadcrumb part end -->

        <!-- my profile part here -->
        <div id="primary" class="content-area section_padding" bis_skin_checked="1">
            <main id="main" class="site-main">
                <div class="container" bis_skin_checked="1">
                    <article id="post-47" class="post-47 page type-page status-publish hentry">
                        <div class="entry-content" bis_skin_checked="1">
                            <div class="learnpress" bis_skin_checked="1">
                                <div id="learn-press-profile" class="lp-user-profile current-user" bis_skin_checked="1">
                                    <div class="main-content-area" bis_skin_checked="1">
                                        <aside id="profile-sidebar">
                                            <div id="profile-nav" bis_skin_checked="1">
                                                <ul class="lp-profile-nav-tabs">
                                                    <li class="settings has-child">
                                                        <a href="#" data-slug="#">
                                                            <i class="fas fa-cog"></i>Ρυθμίσεις
                                                        </a>
                                                        <ul class="profile-tab-sections">
                                                            <li class="basic-information">
                                                                <a href="#" id="general-link">Γενικά</a>
                                                            </li>
                                                            <li class="change-password">
                                                                <a href="#" id="password-link">Κωδικός</a>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <style>
                                                        .user-info-heading {
                                                            font-size: 36px;
                                                            color: #333;
                                                            margin-bottom: 20px;
                                                        }

                                                        .user-info-details {
                                                            background-color: #f5f5f5;
                                                            padding: 20px;
                                                            border-radius: 10px;
                                                            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                                                        }

                                                        .user-info-item {
                                                            margin-bottom: 15px;
                                                        }

                                                        .info-label {
                                                            font-weight: bold;
                                                            margin-right: 10px;
                                                            color: #666;
                                                        }

                                                        .info-value {
                                                            font-size: 18px;
                                                            color: #333;
                                                        }

                                                    </style>

                                                    <li class="logout">
                                                        <a href={{path('app_logout')}} data-slug="index.html">
                                                            <i class="fas fa-sign-out-alt"></i>Αποσύνδεση
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </aside>
                                        <article id="profile-content" class="lp-profile-content">
                                            <div id="profile-content-courses" bis_skin_checked="1">
                                                <div class="learn-press-profile-course__statistic" data-ajax="{&quot;userID&quot;:3}" bis_skin_checked="1">
                                                    <div id="dashboard-general-statistic" bis_skin_checked="1">
                                                        <div id="user-info-container"></div>
                                                        <div id="password-tab" style="display: none;">
                                                            <h3>Αλλαγή Κωδικού</h3>
                                                            <form id="change-password-form" method="POST">
                                                                <div class="form-group">
                                                                    <label for="old-password">Παλιός Κωδικός:</label>
                                                                    <input type="password" id="old-password" name="old-password" class="form-control">
                                                                </div>

                                                                <div class="form-group">
                                                                    <label for="new-password">Νέος Κωδικός:</label>
                                                                    <input type="password" id="new-password" name="new-password" class="form-control">
                                                                </div>

                                                                <div class="form-group">
                                                                    <label for="confirm-password">Νέος Κωδικός:</label>
                                                                    <input type="password" id="confirm-password" name="confirm-password" class="form-control">
                                                                </div>

                                                                <button type="submit" class="btn btn-primary">Change Password</button>
                                                            </form>
                                                            <div id="password-change-success" style="display: none; background-color: beige; padding: 10px;">
                                                                Password changed successfully.
                                                            </div>
                                                            <div id="modernAlert">
                                                                <h3 id="alertTitle"></h3>
                                                                <p id="alertMessage"></p>
                                                                <style>
                                                                    #modernAlert {
                                                                        display: none;
                                                                        position: absolute;
                                                                        top: 50%;
                                                                        left: 50%;
                                                                        transform: translate(-50%, -50%);
                                                                        width: 200px;
                                                                        height: 120px;
                                                                        padding: 10px;
                                                                        background-color: beige;
                                                                        text-align: center;
                                                                        border-radius: 5px;
                                                                    }

                                                                    #alertTitle {
                                                                        font-size: 16px;
                                                                        margin-bottom: 10px;
                                                                    }

                                                                    #alertMessage {
                                                                        font-size: 12px;

                                                                    }

                                                                    .shake {
                                                                        animation: shake 0.10s ease-in-out;
                                                                    }

                                                                    @keyframes shake {
                                                                        0% {
                                                                            transform: translateX(-5px);
                                                                        }
                                                                        25% {
                                                                            transform: translateX(5px);
                                                                        }
                                                                        50% {
                                                                            transform: translateX(-5px);
                                                                        }
                                                                        75% {
                                                                            transform: translateX(5px);
                                                                        }
                                                                        100% {
                                                                            transform: translateX(0);
                                                                        }
                                                                    }

                                                                </style>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>
                                        </article>
                                    </div>
                                </div>
                            </div>
                        </div><!-- .entry-content -->
                    </article>
                </div>
            </main><!-- #main -->
        </div>
        <!-- my profile part end -->

        <!-- footer part here -->
        <footer class="footer_section">
            {% include 'footer.html' %}

        </footer>
        <div class="modal" id="modernAlert">
            <h2 id="alertTitle"></h2>
            <p id="alertMessage"></p>
            <button class="close-button" onclick="hideModernAlert()">Close</button>
        </div>

        <!-- footer part end -->
        <!-- Your HTML code remains the same -->

        <!-- Your HTML code remains the same -->

        <!-- Your HTML code remains the same -->

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Fetch user information using AJAX
                fetch('/account/general')
                    .then((response) => response.json())
                    .then((data) => {
                        // Update the user information in the container
                        var hashedPassword = data.hashedPassword;
                        var form = document.getElementById('change-password-form');
                        form.addEventListener('submit', function (event) {
                            event.preventDefault(); // Prevent form submission

                            var oldPassword = document.getElementById('old-password').value;
                            var newPassword = document.getElementById('new-password').value;
                            var confirmPassword = document.getElementById('confirm-password').value;

                            // Verify if the old password matches the hashed password fetched from the server
                            if (oldPassword !== hashedPassword) {
                                showModernAlert('Password Change Failed', 'Old password is incorrect.');
                            } else if (newPassword !== confirmPassword) {
                                showModernAlert('Password Change Failed', 'Passwords do not match.');
                            } else if (!/[A-Z]/.test(newPassword)) {
                                showModernAlert('Password Change Failed', 'New password must contain at least one uppercase letter.');
                            } else if (!/\d/.test(newPassword)) {
                                showModernAlert('Password Change Failed', 'New password must contain at least one number.');
                            } else if (newPassword.length < 8) {
                                showModernAlert('Password Change Failed', 'New password must be at least 8 characters long.');
                            }  else {
                                // Submit the form
                                fetch('/account/change-password', {
                                    method: 'POST',
                                    body: new FormData(form),
                                })
                                    .then((response) => {
                                        if (response.ok) {
                                            // Password change was successful
                                            showModernAlert('Password Changed', 'Password changed successfully.');
                                            form.reset();
                                        } else {
                                            // Password change failed
                                            showModernAlert('Password Change Failed', 'Your password is not matching.');
                                        }
                                    })
                                    .catch((error) => {
                                        console.error('Error:', error);
                                    });
                            }
                        });

                        var userInfoContainer = document.getElementById('user-info-container');
                        userInfoContainer.innerHTML = `
          <h2 class="user-info-heading">Πληροφορίες Λογαριασμού</h2>
          <div class="user-info-details">
            <p class="user-info-item"><span class="info-label">Όνομα Χρήστη :</span> ${data.username}</p>
            <p class="user-info-item"><span class="info-label">Email:</span> ${data.email}</p>
            <p class="user-info-item"><span class="info-label">Πακέτο:</span> ${data.role}</p>
            <p class="user-info-item">
                <span class="info-label">Ενεργή έως :</span>
                ${data.subscription ? (new Date(data.subscription) <= new Date() ? 'Expired' : data.subscription) : 'There is no available subscription yet'}
            </p>
          </div>
        `;

                        // Set the "General" tab as active
                        var generalLink = document.getElementById('general-link');
                        generalLink.classList.add('active');
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                    });
            });


            // Function to show the password tab
            function showPasswordTab() {
                var userInfoContainer = document.getElementById('user-info-container');
                var passwordTab = document.getElementById('password-tab');

                // Hide the user information container
                userInfoContainer.style.display = 'none';

                // Display the password tab
                passwordTab.style.display = 'block';

                // Set the "Password" tab as active
                var passwordLink = document.getElementById('password-link');
                passwordLink.classList.add('active');
            }

            // Add click event listener to the "Password" button
            var passwordButton = document.getElementById('password-link');
            passwordButton.addEventListener('click', showPasswordTab);
            function hideModernAlert() {
                var modernAlert = document.getElementById('modernAlert');
                modernAlert.style.display = 'none';
            }


            function showModernAlert(title, message) {
                var modernAlert = document.getElementById('modernAlert');
                var alertTitle = document.getElementById('alertTitle');
                var alertMessage = document.getElementById('alertMessage');

                alertTitle.innerHTML = title;
                alertMessage.innerHTML = message;

                modernAlert.style.display = 'block';

                if (message.includes('incorrect') || message.includes('do not match')) {
                    modernAlert.classList.add('shake');
                } else {
                    modernAlert.classList.remove('shake');
                }

                setTimeout(function () {
                    modernAlert.style.display = 'none';
                }, 2500); // Hide alert after 2.5 seconds
            }

            function showGeneralTab() {
                var userInfoContainer = document.getElementById('user-info-container');
                var passwordTab = document.getElementById('password-tab');
                var generalTab = document.getElementById('general-tab');

                // Display the user information container
                userInfoContainer.style.display = 'block';

                // Hide the password tab
                passwordTab.style.display = 'none';

                // Display the general tab
                generalTab.style.display = 'block';

                // Set the "General" tab as active
                var generalLink = document.getElementById('general-link');
                generalLink.classList.add('active');

                // Remove the "active" class from the "Password" tab
                var passwordLink = document.getElementById('password-link');
                passwordLink.classList.remove('active');
            }

            // Add click event listener to the "General" link
            var generalLink = document.getElementById('general-link');
            generalLink.addEventListener('click', showGeneralTab);


        </script>

        <!-- jquery slim -->
        <script src="{{ asset('js/jquery-3.4.1.min.js') }}"></script>
        <!-- popper js -->
        <script src="{{ asset('js/popper.min.js') }}"></script>
        <!-- bootstrap js -->
        <script src="{{ asset('js/bootstrap.min.js') }}"></script>
        <!-- nice select -->
        <script src="{{ asset('vendors/niceselect/js/jquery.nice-select.min.js') }}"></script>
        <!-- owl carousel js -->
        <script src="{{ asset('vendors/owl_carousel/js/owl.carousel.min.js') }}"></script>
        <!-- magnify popup js -->
        <script src="{{ asset('vendors/magnify_popup/jquery.magnific-popup.js') }}"></script>
        <!-- simplyCountdown js -->
        <script src="{{ asset('vendors/countdown/js/simplyCountdown.min.js') }}"></script>
        <!-- counter js -->
        <script src="{{ asset('vendors/counter/jquery.countTo.js') }}"></script>
        <!-- aos js -->
        <script src="{{ asset('vendors/aos/aos.js') }}"></script>
        <!-- font awesome js -->
        <script src="https://kit.fontawesome.com/6ee3230338.js"></script>
        <!-- custom js -->
        <script src="{{ asset('js/custom.js') }}"></script>

    </body>

    </html>
